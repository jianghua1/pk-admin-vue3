<template>
  <div class="flex w-[900px] h-[600px] rounded">
    <div class="w-1/2">
      <div class="bg"></div>
    </div>
    <div class="w-1/2 px-4">
      <router-view></router-view>
      <!-- ç¬¬ä¸‰æ–¹ç™»å½• -->
      <el-divider direction="horizontal" class="mt-10">
        <span class="text-gray-500">å…¶ä»–ç™»å½•æ–¹å¼</span>
      </el-divider>
      <div class="flex justify-around">
        <VpIconify
          class="text-2xl text-gray-400 cursor-pointer hover:text-[var(--el-color-primary)]"
          :icon="item.icon"
          v-for="(item, index) in loginItems"
          :key="index"
          @click="handleClickItem(item)"
        ></VpIconify>
      </div>
    </div>
    <!-- <el-button @click="handleClick">test å‘é€æ¶ˆæ¯</el-button> -->
  </div>
</template>

<script setup lang="ts">
import { useWork } from '@/hooks/useWork'

definePage({
  meta: {
    title: 'pages.login.default',
    hideMenu: true,
    layout: 'single-page',
    position: 'center',
    backgroundImage: './bg.jpg'
  }
})

const loginItems = [
  {
    icon: 'ic:baseline-wechat',
    url: ''
  },
  {
    icon: 'cib:tencent-qq',
    url: ''
  },
  {
    icon: 'bi:sina-weibo',
    url: ''
  },
  {
    icon: 'mdi:github',
    url: ''
  }
]

const handleClickItem = (item) => {
  console.log('ğŸš€ ~ handleClickItem ~ item:', item)
}

// const worker = new SharedWorker(new URL('@/utils/shared-worker.js', import.meta.url))

// const { on, emit, broadcast } = useWork()

// const handleClick = () => {
//   // emit('/1111', 'ä» login é¡µé¢å‘é€çš„æ¶ˆæ¯')
//   broadcast('ä» login é¡µé¢å‘é€çš„å¹¿æ’­æ¶ˆæ¯')
// }

onMounted(() => {
  // 1.ä»æ–°çš„é¡µé¢å‘é€æ¶ˆæ¯
  // if (window.opener) {
  //   window.opener.postMessage('hello from other tab', '*')
  // }
  // 2.ä»æ—§çš„é¡µé¢å‘é€æ¶ˆæ¯ï¼Œåœ¨æ–°çš„ tab ä¸­æ¥æ”¶æ¶ˆæ¯
  // window.addEventListener('message', (event) => {
  //   console.log('ğŸš€ ~ onMounted new Tab ~ event:', event)
  // })
  // æµ‹è¯•å†…å®¹
  // on('message', (data) => {
  //   console.log('login é¡µé¢æ”¶åˆ°æ¶ˆæ¯:', data)
  // })
  // worker.port.start()
  // setTimeout(() => {
  //   worker.port.postMessage('from worker')
  // }, 5000)
})
</script>

<style scoped lang="scss">
.bg {
  background: url('@/assets/images/login.png') no-repeat center center;
  background-size: contain;
  width: 100%;
  height: 100%;
}

:deep(.el-tabs__nav-wrap) {
  &:after {
    display: none;
  }
}
</style>
